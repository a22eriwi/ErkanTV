{"ast":null,"code":"var _jsxFileName = \"D:\\\\Erkflix\\\\src\\\\Frontend\\\\Login.js\",\n  _s = $RefreshSig$();\n// src/Login.js\nimport React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../authContext';\nimport Header from '../Components/Header';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL;\nfunction Login() {\n  _s();\n  const {\n    login\n  } = useAuth();\n  const {\n    isLoggedIn\n  } = useAuth();\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const handleLogin = async e => {\n    e.preventDefault(); // prevents page reload\n\n    try {\n      const res = await fetch(`${API_URL}/api/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      const data = await res.json();\n      if (res.status === 403) {\n        setMessage('❌ Your account is not yet approved.');\n      } else if (res.ok) {\n        login(data.token);\n        setMessage(`✅ ${data.message || 'Logged in!'}`);\n        setTimeout(() => navigate('/'), 600);\n      } else {\n        setMessage(`❌ ${data.message || 'Login failed.'}`);\n      }\n    } catch (err) {\n      console.error('Login error:', err);\n      setMessage('❌ Something went wrong. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mainDiv\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleLogin,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"authKnapp\",\n            type: \"submit\",\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `auth-message ${message.startsWith('✅') ? 'success' : 'error'}`,\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), !isLoggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"authDiv\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"auth-message\",\n            children: \"Don\\u2019t have an account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"auth-message2\",\n              children: \"Register here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 36\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Login, \"KTbe14t4D2mEmYUYAE0KLI2fUq8=\", false, function () {\n  return [useAuth, useAuth, useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Link","useNavigate","useAuth","Header","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","Login","_s","login","isLoggedIn","navigate","email","setEmail","password","setPassword","message","setMessage","handleLogin","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","data","json","status","ok","token","setTimeout","err","console","error","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","placeholder","value","onChange","target","required","startsWith","to","_c","$RefreshReg$"],"sources":["D:/Erkflix/src/Frontend/Login.js"],"sourcesContent":["// src/Login.js\r\nimport React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../authContext';\r\nimport Header from '../Components/Header';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL;\r\n\r\nfunction Login() {\r\n  const { login } = useAuth();\r\n  const { isLoggedIn } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault(); // prevents page reload\r\n\r\n    try {\r\n      const res = await fetch(`${API_URL}/api/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.status === 403) {\r\n        setMessage('❌ Your account is not yet approved.');\r\n      } else if (res.ok) {\r\n        login(data.token);\r\n        setMessage(`✅ ${data.message || 'Logged in!'}`);\r\n        setTimeout(() => navigate('/'), 600);\r\n      } else {\r\n        setMessage(`❌ ${data.message || 'Login failed.'}`);\r\n      }\r\n    } catch (err) {\r\n      console.error('Login error:', err);\r\n      setMessage('❌ Something went wrong. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className='mainDiv'>\r\n        <div className=\"form-container\">\r\n          <h2>Sign in</h2>\r\n          <form onSubmit={handleLogin}>\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n            <button className=\"authKnapp\" type=\"submit\">\r\n              Sign In\r\n            </button>\r\n          </form>\r\n          {message && (\r\n            <p className={`auth-message ${message.startsWith('✅') ? 'success' : 'error'}`}>{message}</p>\r\n          )}\r\n          {!isLoggedIn && (\r\n            <div className='authDiv'>\r\n              <p className=\"auth-message\">Don’t have an account?</p>\r\n              <Link to=\"/register\"><p className=\"auth-message2\">Register here</p></Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}